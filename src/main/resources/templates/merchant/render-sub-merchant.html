<th:block th:fragment="render-sub-merchant" xmlns:th="http://www.thymeleaf.org">
    <div class="table-responsive mb-2 mt-3">
        <table class="table table-sm custom-table table-bordered table-hover text-center" style="table-layout: auto; width: 100%; font-weight: 600;">
            <thead class="thead-light align-content-center">
            <tr>
                <th class="align-content-center" style="width: 0%" th:text="#{no}"></th>
                <th class="align-content-center" style="width: 0%" th:text="#{code}">Code</th>
                <th class="align-content-center" style="width: 1%" th:text="#{name}">Name</th>
                <th class="align-content-center" style="width: 1%" th:text="#{owner-name}">Owner name</th>
                <th style="width: 0%"></th>
            </tr>
            </thead>
            <tbody>
            <tr onclick="activeRowTable(event)" th:each="model,item : ${models}" th:attr="data-id=${model.id}">
                <td  class="text-center"
                     th:text="${item.index + pageSize * pageNo - (pageSize - 1)}">
                </td>
                <td th:text="${model.code}"></td>
                <td style="text-align: start;" th:text="${model.name}"></td>
                <td style="text-align: start;" th:text="${model.ownerName}"></td>
                <td>
                    <div class="d-flex">
                        <!--Admin-->
                        <th:block th:if="${@permissionVoucher.checkAdminVoucher()}">
                            <button title="Detail" th:attr="onclick=|editSubMerchant(${model.id})|" class="btn btn-sm">
                                <i class="fas fa-eye" style="color: #00709e;"></i>
                            </button>
                            <button title="Staff" th:attr="onclick=|searchStaff(1, false, ${model.id}, '${model.name}')|" class="btn btn-sm">
                                <i class="fa-solid fa-users" style="color: #00709e;"></i>
                            </button>
                        </th:block>
                        <!--Staff-->
                        <th:block th:unless="${@permissionVoucher.checkAdminVoucher()}">
                            <button th:attr="onclick=|editSubMerchant(${model.id})|" class="btn btn-sm" th:title="${merchant.status == 2 || merchant.status == 4 ? 'Edit' : 'Detail'}">
                                <i th:class="${merchant.status == 2 || merchant.status == 4 ? 'far fa-edit' : 'fas fa-eye'}" style="color: #00709e;"></i>
                            </button>
                            <button title="Staff" th:attr="onclick=|searchStaff(1, false, ${model.id}, '${model.name}')|" class="btn btn-sm">
                                <i class="fa-solid fa-users" style="color: #00709e;"></i>
                            </button>
                            <button th:if="${merchant.status == 2 || merchant.status == 4}" th:attr="onclick=|deleteSubMerchant(${model.id})|" title="Delete" class="btn btn-sm">
                                <i class="fas fa-trash-alt" style="color: #ff0000;"></i>
                            </button>
                        </th:block>
                    </div>
                </td>
            </tr>
            <tr th:if="${models.size() == 0}">
                <td colspan="100">No result</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="d-flex justify-content-between">
        <div class="d-flex font-weight-bold align-items-center">
            <p class="m-0">Show </p>
            <select id="buuPageSizeSubMerchant" class="buu_page_size mx-2 font-weight-bold">
                <option value="10" selected th:selected="${pageSize == 10}">10</option>
                <option value="20" th:selected="${pageSize == 20}">20</option>
                <option value="30" th:selected="${pageSize == 30}">30</option>
                <option value="40" th:selected="${pageSize == 40}">40</option>
                <option value="50" th:selected="${pageSize == 50}">50</option>
            </select>
            <input type="hidden" name="pageSize" value="10" />
            <p class="m-0">Elements</p>
        </div>
        <ul id="buuPaginationSubMerchant" class="pagination buu-pagination"></ul>
    </div>
    <script th:inline="javascript">
        $(() => {
            let selectPageSize = document.querySelector('#buuPageSizeSubMerchant');
            let inputPageSize = document.querySelector('#buuPageSizeSubMerchant + input[name="pageSize"]');
            if(inputPageSize) inputPageSize.value = [[${pageSize}]];

            function formatPageNumberSubMerchant() {
                $('#buuPaginationSubMerchant').find('a, span').each(function() {
                    let pageNumber = parseInt($(this).text());

                    if (!isNaN(pageNumber)) {
                        $(this).text(pageNumber.toLocaleString().replaceAll('.', ','));
                    }
                });
            }

            selectPageSize.addEventListener("change", function (e) {
                if(inputPageSize) inputPageSize.value = this.value;
                $('#buuPaginationSubMerchant').pagination('selectPage', 1);
            })

            $('#buuPaginationSubMerchant').pagination({
                items: [[${totalPage}]],
                itemOnPage: [[${pageSize}]],
                currentPage: [[${pageNo}]],
                cssStyle: '',
                prevText: '<',
                nextText: '>',
                onInit: function () {
                    // lúc load trang hàm này sẽ được gọi
                    formatPageNumberSubMerchant();
                },
                onPageClick: function (page, e) {
                    formatPageNumberSubMerchant();

                    // Lúc chuyển trang hàm này sẽ được gọi
                    searchSubMerchant();
                }
            });
        })
    </script>
</th:block>