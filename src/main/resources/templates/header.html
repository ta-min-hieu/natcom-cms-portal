<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title th:text="#{home}"></title>

  <!-- Custom fonts for this template-->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <link th:href="@{/webjars/font-awesome/6.4.2/css/all.min.css}"  rel="stylesheet" type="text/css">

  <link
          href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
          rel="stylesheet">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- Custom styles for this template-->
  <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/styles.css}">

  <link rel="icon" type="image/x-icon" th:href="@{/img/logo-t.png}">
  <title>CMS</title>
  <link rel="stylesheet" th:href="@{/css/subcss.css}">
</head>

<body id="page-top">
<div>

  <nav class="navbar navbar-expand navbar-light bg-white topbar static-top shadow border-bottom"
       style="    background-color: #00709e !important; height: 50px; margin-bottom: 0px !important;" th:fragment = "header">
    <div class="col d-flex flex-row logo" style="height: 100%; width: 100%;">
      <a style="overflow: hidden; width:100%; height: 100%; background: transparent;" class="sidebar-brand d-flex align-items-center " th:href="@{/index}">
        <div class="logo-img" style="height:100%; width:auto" >
          <img style="object-fit:cover" class="figure-img img-fluid rounded" th:src="@{/img/logo.png}" alt="">
        </div>
      </a>
    </div>
    <div class="col">
      <div class="row justify-content-end" style="width: 100%;">
        <div class="img-out row" style="width: 15%;">
          <div class="img-inner px-1" style="width: 40%;">
            <div class="img-language" style="width: 100%;">
              <a onclick="changeLanguage('en')"  style="cursor: pointer;">
                <img th:src="@{/img/en.jpeg}" style="width: 100%;" alt="English">
              </a>
            </div>
          </div>
          <div class="img-inner px-1" style="width: 40%;">
            <div class="img-language" style="width: 100%;">
              <a onclick="changeLanguage('vn')"  style="cursor: pointer;">
                <img th:src="@{/img/vn.jpeg}" style="width: 100%;" alt="Vietnamese">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function changeLanguage(lang) {
        var context = "/" + window.location.pathname.split('/')[1];
        fetch(context + '/change-language?lang=' + lang, {method: 'POST'})
                .then(() => location.reload())
                .catch((error) => console.error('Error:', error));
      }
    </script>
  </nav>
  <nav class="navbar navbar-expand navbar-light bg-white topbar static-top shadow border-bottom"
       style="    background-color: #FFF100 !important; height: 60px" th:fragment = "header2">
    <div class="col d-flex flex-row logo" style="height: 100%; width: 100%;">
      <a style="overflow: hidden; width:100%; height: 100%; background: transparent;" class="sidebar-brand d-flex align-items-center " th:href="@{/index}">
        <div class="logo-img" style="height:100%; width:auto" >
          <img style="object-fit:cover" class="figure-img img-fluid rounded" th:src="@{/img/logo_telemor.png}" alt="">
        </div>
      </a>
    </div>

    <!-- Topbar Navbar -->

    <!--        <div class="col">-->
    <!--          <div class="row justify-content-end" style="width: 100%;">-->
    <!--            <div class="img-out row" style="width: 15%;">-->
    <!--              <div class="img-inner px-1" style="width: 40%;">-->
    <!--                <div class="img-language" style="width: 100%;">-->
    <!--                  <img th:src="@{/img/en.jpeg}" style="width: 100%;" alt="">-->
    <!--                </div>-->
    <!--              </div>-->
    <!--              <div class="img-inner px-1" style="width: 40%;">-->
    <!--                <div class="img-language" style="width: 100%;">-->
    <!--&lt;!&ndash;                  <img th:src="@{/img/vn.jpeg}" style="width: 100%;" alt="">&ndash;&gt;-->
    <!--                </div>-->
    <!--              </div>-->
    <!--            </div>-->
    <!--          </div>-->
    <!--        </div>-->
    <div class="col">
      <div class="row justify-content-end" style="width: 100%;">
        <div class="img-out row" style="width: 15%;">
          <div class="img-inner px-1" style="width: 40%;">
            <div class="img-language" style="width: 100%;">
              <a onclick="changeLanguage('en')">
                <img th:src="@{/img/en.jpeg}" style="width: 100%;" alt="English">
              </a>
            </div>
          </div>
          <div class="img-inner px-1" style="width: 40%;">
            <div class="img-language" style="width: 100%;">
              <a onclick="changeLanguage('vn')">
                <img th:src="@{/img/vn.jpeg}" style="width: 100%;" alt="Vietnamese">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
</div>
<!-- Page Wrapper -->
<div id="wrapper">
  <ul class="navbar-nav shadow-lg sidebar sidebar-dark custom-sidebar accordion bg-coler-cus" id="accordionSidebar" th:fragment = "menu">
    <div class="col pt-3" style="flex-grow: 0 !important;">
      <div id="avatar" class="col px-5 py-3 text-center">
        <img th:src="@{/img/user_avatar.png}" style="max-width: 75px;" width="100%" height="auto" viewBox="0 0 106 106" fill="none">
      </div>
      <div class="col d-flex justify-content-center" style="color: #fff;">
        <h6 sec:authentication="principal.name" style="font-size: 20px;">Tô An An</h6>
      </div>
    </div>
    <!-- Nav Item - Dashboard -->
    <li class="nav-item">
      <a class="nav-link" th:href="@{'/index'}">
        <i class="fa fa-home" aria-hidden="true"></i>
        <span th:text="#{home}" style="font-size: 15px !important;"></span>
      </a>
    </li>
    <!-- Nav Item - Pages Collapse Menu -->
    <li th:class="${menu.lstChildMenus}?'nav-item nav-collapse':'nav-item'" th:each="menu,item : ${listMenu}">
      <a th:class="${menu.lstChildMenus}?'nav-link collapsed':'nav-link'" th:href="@{${menu.lstChildMenus} ? '#' : ${menu.router.router_link}}"
         th:attr="data-toggle=${menu.lstChildMenus != null} ? 'collapse' : null, data-target='#collapsePages'+${item.index + 1}"
         aria-expanded="true" aria-controls="collapsePages">
        <span  th:utext="${menu.icon.name}" ></span>
        <span th:text ="${menu.name}" style="font-size: 15px !important;">Pages</span>
      </a>
      <div th:if="${menu.lstChildMenus}" th:id="'collapsePages'+${item.index+1}" class="collapse collapsePages" aria-labelledby="headingPages" data-parent="#accordionSidebar">
        <div class=" py-2 collapse-inner rounded" th:id="'collapsePages'+${item.index + 1}">
          <a class="collapse-item" style="white-space: break-spaces !important;font-size: 15px !important;" th:each ="item : ${menu.lstChildMenus}" th:href="@{${item.router} ? ${item.router.router_link} : ''}" th:text = "${item.name}">Login</a>
        </div>
      </div>
    </li>

    <!-- Nav Item - Charts -->

    <li class="nav-item">
      <a class="nav-link" href="#logout" data-toggle="modal" data-target="#logoutModal">
        <i class="fas fa-sign-out-alt"></i>
        <span th:text="#{logout}">Logout</span>
      </a>
    </li>


    <!-- Divider -->
    <hr class="sidebar-divider d-none d-md-block">

    <!-- Sidebar Toggler (Sidebar) -->
    <div class="text-center d-none d-md-inline">
      <button class="rounded-circle border-0" id="sidebarToggle"></button>
    </div>

  </ul>
  <!-- End of Sidebar -->

  <!-- Content Wrapper -->
  <div id="content-wrapper" class="d-flex flex-column">

    <!-- Main Content -->
    <div id="content">
      <!-- Begin Page Content -->
      <div class="container-fluid">


      </div>
      <!-- /.container-fluid -->

    </div>
    <!-- End of Main Content -->

  </div>
  <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

<div th:fragment = "error">
  <div class="alert-danger" role="alert">
    <span th:text = "#{Fragment.error}" style="white-space: pre-line;"></span>
  </div>
</div>
<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
  <i class="fas fa-angle-up"></i>
</a>
<!-- Modal -->
<!-- Logout Modal-->
<div >
  <div class="modal fade" th:fragment = "modalLogout" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true" >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel" style="font-weight: bold" th:text="#{sureOut}"></h5>
          <button class="close" type="button" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body" th:text="#{choose}"></div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-bs-dismiss="modal" th:text="#{back}"></button>
          <a class="btn btn-primary" th:href="@{/logout}" th:text="#{logout}"></a>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="resetpassword" tabindex="-1"  role="dialog"  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel1" style="font-weight: bold" th:value="#{upPass}">Đổi mật khẩu</h5>
          <button class="close" type="button" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="alert-danger" role="alert" th:text="${errorpass}" th:if="${errorpass}"></div>
        <div class="modal-body">
          <form th:action="@{/sys/user/resetpassword}" id="resetpasswordform" method="post">
            <div class="col mb3">
              <label for="sl" th:value="#{oldPass}" style="font-weight: bold">Mật khẩu cũ <span style="color:red"> *</span></label>
              <input type="password" id="sl" name="password" class="form-control" placeholder="Mật khẩu" aria-label="Rule Name" required>
            </div>
            <div class="col mb3">
              <label for="passnew" th:value="#{newPass}" style="font-weight: bold">Mật khẩu mới <span style="color:red"> *</span></label>
              <input type="password" id="passnew" name="passwordnew" class="form-control" placeholder="Mật khẩu" aria-label="Rule Name" required>
            </div>
            <div class="col mb3">
              <label for="retail" th:value="#{cfPass}" style="font-weight: bold">Xác nhận mật khẩu <span style="color:red"> *</span></label>
              <input type="password" id="retail" name="passwordnew2" class="form-control"  aria-label="Rule Name" required>
            </div>
            <div class="d-flex col align-items-end mt-3">
              <button type="submit" th:attr="onclick=|disableResetPassword()|" class="btn btn-primary" th:value="#{save}">Lưu</button>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-bs-dismiss="modal" th:value="#{back}">Quay lại</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div th:fragment = "modalPreview">
  <div class="modal fade" id="modalPreview" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog"   role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel233">Preview</h5>
          <button class="close" type="button" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="d-flex flex-column shadow-lg p-3 mb-5 bg-body rounded">
            <div class="h3">
              <h6 th:text="#{detailDoc}">Detail Document</h6>
            </div>
            <div class="col">
              <div class="list-field row row-cols-2">
                <div class="col-6 my-2 px-5">
                  <label th:text="#{docName}">Tên tài liệu</label>
                  <input class="form-control" name="nameDocument"
                         th:value="${versiondocument}?${versiondocument.nameDocument}:''"
                         type="text" readonly>
                  <input name="idDC" readonly hidden th:value="${typeDocument.id}">
                  <input name="id" th:if="${document}" hidden th:value="${document.id}">
                </div>
                <div class="col-6 my-2 px-5" th:each="item : ${typeDocument.documentFields}">
                  <label th:text="${item.fieldDocument.label}">Tên trường</label>

                  <select class="form-control" th:if="${item.fieldDocument.type == 'partner'}"
                          th:name="${item.id}" disabled>
                    <option></option>
                    <option th:each="item2:${partners}"
                            th:selected="${documentMD}?${documentMD.map[item.id]}==${item2.id}:'false'"
                            th:value="${item2.id}" th:text="${item2.name}"></option>
                  </select>
                  <textarea th:if="${item.fieldDocument.type == 'textarea'}" type="text"
                            th:text="${documentMD}?${documentMD.map[item.id]}"
                            class="form-control" th:name="${item.id}" aria-label="Rule Name"
                            readonly></textarea>
                  <input th:if="${item.fieldDocument.type != 'textarea' && item.fieldDocument.type != 'partner' && !item.fieldDocument.isOptionCus}"
                         th:value="${documentMD}?${documentMD.map[item.id]}"
                         th:type="${item.fieldDocument.type}" th:name="${item.id}"
                         class="form-control" aria-label="Rule Name" readonly>
                  <select th:if="${item.fieldDocument.isOptionCus}" class="form-control"
                          th:name="${item.id}"
                          th:value="${documentMD}?${documentMD.map[item.id]}" disabled>
                    <option></option>
                    <option th:each="itemOp:${item.fieldDocument.options}"
                            th:selected="${documentMD}?${documentMD.map[item.id]}==${itemOp.id}:'false'"
                            th:value="${itemOp.id}" th:text="${itemOp.label}"></option>
                  </select>
                </div>
              </div>
              <div th:each="item, itemStat : ${fileDtos}">
                <input type="hidden" th:value=${fileDtos[__${itemStat.index}__].url}
                       th:id="'url' + ${item.id}">
                <input type="hidden" th:value=${fileDtos[__${itemStat.index}__].id}
                       th:id="'id' + ${item.id}">
              </div>
              <input type="file" multiple id="file-input" name="files" hidden
                     class="form-control-file">
            </div>
          </div>
          <div class="d-flex flex-column shadow-lg mb-5 bg-body rounded">
            <div class="router">
              <div class="router_inner">
                <div class=" row row-cols-2 mb-3">
                  <div class="col-6">
                    <h6 th:text="#{fileUp}">File upload</h6>
                  </div>
                  <div class="col-6 d-flex justify-content-end"
                       style="padding-right: 0 !important;">
                    <a type="button"
                       th:href="@{'/document/download-all/'+ ${versiondocument.id}}"
                       style="cursor: pointer;" class="btn btn-primary"
                       th:text="#{downloadAll}">Download All</a>
                  </div>
                </div>
                <div class="table_router">
                  <table class="table custom-table table-bordered">
                    <thead class="thead-light">
                    <tr>
                      <th scope="col" th:text="#{no}">No</th>
                      <th scope="col" th:text="#{nameFile}">File name</th>
                      <th scope="col" th:text="#{preview}">Preview</th>
                      <th scope="col" th:text="#{download}">Download</th>
                    </tr>
                    </thead>
                    <tbody id="file-table-body2">
                    <tr class="file-old3" th:each="item:${fileDocmentDto.fileDtos}"
                        th:id="'trfile3' + ${item.id}">
                      <th scope="row" class="stt3"
                          style="font-weight: normal; color: #000000;">1
                      </th>
                      <td th:text="${item.name}?${item.name}:'fileUpload'">Otto</td>
                      <td>
                        <a type="button" data-toggle="modal"
                           th:attr="data-target='#viewModal'+${item.id}"
                           style="color: #001AFF;" th:text="#{view}">View</a>
                      </td>
                      <td>
                        <a type="button" target="_blank"
                           th:href="@{'/document/download/'+${item.id}}"
                           class="btn btn-primary" th:text="#{download}">Download</a>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Quay lại</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" th:each="item:${fileDocmentDto.fileDtos}" th:if="${item.check!=0}" th:id="'viewModal' + ${item.id}" tabindex="-1"
       aria-labelledby="detailModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header pt-3 px-3 pb-0">
          <div class="router_title my-0">
            <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-sm mr-2 p-1" style="line-height:11px;margin-bottom: 8px;background-color: #00709E;color: white;"><span aria-hidden="true" style="font-size: 18px;">&times;</span></button>
            <h3 style="font-weight: bold; color: #00709E;" id="detailModalLabel3">View</h3>
          </div>
        </div>
        <div class="modal-body">
          <iframe th:if="${item.check==1}" class="ringme-file-preview"
                  th:src="${'https://view.officeapps.live.com/op/embed.aspx?src=http://docs-timor.ringme.vn/document-media01'+item.url}"
                  style="    width: 100%;
    min-height: 80vh;"></iframe>
          <iframe th:if="${item.check==2}" class="ringme-file-preview"
                  th:src="${'http://docs-timor.ringme.vn/document-media01'+item.url}"
                  style="    width: 100%;
    min-height: 80vh;"></iframe>
          <!--                <embed th:src="${'https://devsdkapis.ringme.vn/qltl/fileupload/'+item.url}" width="100%" height="500px">-->
        </div>
      </div>
    </div>
  </div>
</div>

<div th:fragment = "modalPreviewWarning">
  <div class="modal fade" id="modalPreviewWarning" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg"   role="document">
      <div class="modal-content">
        <div class="modal-header pt-3 px-3 pb-0">
          <div class="router_title my-0">
            <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-sm mr-2 p-1" style="line-height:11px;margin-bottom: 8px;background-color: #00709E;color: white;"><span aria-hidden="true" style="font-size: 18px;">&times;</span></button>
            <h3 style="font-weight: bold; color: #00709E;" id="exampleModalLabel233Warning">Preview</h3>
          </div>
        </div>
        <div class="modal-body">
          <div class="d-flex flex-column shadow-lg p-3 mb-5 bg-body rounded">
            <div class="h3">
              <h6 th:text="#{detailDoc}">Detail Document</h6>
            </div>
            <div class="col">
              <div class="list-field row row-cols-2">
                <div class="col-6 my-2 px-5">
                  <label th:text="#{docName}" style="font-weight: bold;">Tên tài liệu</label>
                  <input class="form-control" name="nameDocument"
                         th:value="${versiondocument}?${versiondocument.nameDocument}:''"
                         type="text" readonly>
                  <input name="idDC" readonly hidden th:value="${typeDocument.id}">
                  <input name="id" th:if="${document}" hidden th:value="${document.id}">
                </div>
                <div class="col-6 my-2 px-5" th:each="item : ${typeDocument.documentFields}">
                  <label th:text="${item.fieldDocument.label}" style="font-weight: bold;">Tên trường</label>

                  <select class="form-control" th:if="${item.fieldDocument.type == 'partner'}"
                          th:name="${item.id}" disabled>
                    <option th:each="item1:${partners}"
                            th:selected="${documentMD}?${documentMD.map[item.id]}==${item1.id}:'false'"
                            th:value="${item1.id}" th:text="${item1.name}"></option>
                  </select>
                  <textarea th:if="${item.fieldDocument.type == 'textarea'}" type="text"
                            th:text="${documentMD}?${documentMD.map[item.id]}"
                            class="form-control" th:name="${item.id}" aria-label="Rule Name"
                            readonly></textarea>
                  <input th:if="${item.fieldDocument.type != 'textarea' && item.fieldDocument.type != 'partner' && !item.fieldDocument.isOptionCus}"
                         th:value="${documentMD}?${documentMD.map[item.id]}"
                         th:type="${item.fieldDocument.type}" th:name="${item.id}"
                         class="form-control" aria-label="Rule Name" readonly>
                  <select th:if="${item.fieldDocument.isOptionCus}" class="form-control"
                          th:name="${item.id}"
                          th:value="${documentMD}?${documentMD.map[item.id]}" disabled>
                    <option th:each="itemOp:${item.fieldDocument.options}"
                            th:selected="${documentMD}?${documentMD.map[item.id]}==${itemOp.id}:'false'"
                            th:value="${itemOp.id}" th:text="${itemOp.label}"></option>
                  </select>
                </div>
                <div class="col-6 my-2 px-5">
                  <label th:text="#{docWar}" style="font-weight: bold;">Cảnh báo tài liệu</label>
                  <input class="form-control left-align-checkbox" disabled
                         th:checked="${versiondocument != null ? versiondocument.warning :'false'}"
                         name="checkWarning" value="1" style="width: auto;" id="warning-document"
                         type="checkbox" th:onchange="'toggleSelect()'">
                </div>
                <div class="col-6 my-2 px-5" id="select-container"
                     th:style="${versiondocument != null ? (versiondocument.warning ? 'display:block' : 'display:none') : 'display:none'}">
                  <label th:text="#{fieldWar}" style="font-weight: bold;">Trường cảnh báo</label>
                  <select name="fieldWarning" class="form-control" disabled>
                    <option th:each="item : ${fieldDate}"
                            th:value="${item.id}"
                            th:text="${item.fieldDocument.label}"
                            th:selected="${versiondocument != null && versiondocument.documentFieldWarning != null && versiondocument.documentFieldWarning.id == item.id}">
                      1
                    </option>
                  </select>
                </div>
                <div class="col-6 my-2 px-5" id="time-warning"
                     th:style="${versiondocument != null && versiondocument.warning ? 'display:block;' : 'display:none;'}">
                  <label  style="font-weight: bold;"  th:text="#{timeWar}">Thời gian cảnh báo</label>
                  <select name="countdownTime" class="form-control"
                          id="time-warning-select" th:onchange="'checkSelect()'" disabled>
                    <option value="7"
                            th:selected="${versiondocument != null && versiondocument.countdownWarning == '7'} ? 'selected' : null"
                            th:text="#{count7}">
                      Đếm ngược 7 ngày
                    </option>
                    <option value="15"
                            th:selected="${versiondocument != null && versiondocument.countdownWarning == '15'} ? 'selected' : null"
                            th:text="#{count15}">
                      Đếm ngược 15 ngày
                    </option>
                    <option value="30"
                            th:selected="${versiondocument != null && versiondocument.countdownWarning == '30'} ? 'selected' : null"
                            th:text="#{count30}">
                      Đếm ngược 30 ngày
                    </option>
                    <option value="0"
                            th:selected="${versiondocument != null && versiondocument.countdownWarning == '0'} ? 'selected' : null"
                            th:text="#{setTime}">
                      Hẹn giờ
                    </option>
                  </select>
                </div>
                <div class="col-6 my-2 px-5" id="custom-time-warning-container"
                     th:style="${versiondocument != null && (versiondocument.countdownWarning == '0') ? 'display:block;' : 'display:none;'}">
                  <label  style="font-weight: bold;"  th:text="#{setTime}">Hẹn giờ</label>
                  <input readonly class="form-control" name="timeWarning" id="custom-time-warning"
                         type="number"
                         th:value="${ versiondocument != null && (versiondocument.waitTimeCustom !=null)}?${versiondocument.waitTimeCustom}:''">
                </div>
              </div>
              <div th:each="item, itemStat : ${fileDtos}">
                <input type="hidden" th:value=${fileDtos[__${itemStat.index}__].url}
                       th:id="'url' + ${item.id}">
                <input type="hidden" th:value=${fileDtos[__${itemStat.index}__].id}
                       th:id="'id' + ${item.id}">
              </div>
              <input type="file" multiple id="file-input2" name="files" hidden
                     class="form-control-file">
            </div>
          </div>
          <div class="d-flex flex-column shadow-lg mb-5 bg-body rounded">
            <div class="router">
              <div class="router_inner">
                <div class=" row row-cols-2 mb-3">
                  <div class="col-6">
                    <h6 th:text="#{fileUp}">File upload</h6>
                  </div>
                  <div class="col-6 d-flex justify-content-end"
                       style="padding-right: 0 !important;">
                    <a type="button"
                       th:href="@{'/document/download-all/'+ ${versiondocument.id}}"
                       style="cursor: pointer;" class="btn btn-primary"
                       th:text="#{downloadAll}">Download All</a>
                  </div>
                </div>
                <div class="table_router">
                  <table class="table custom-table table-bordered">
                    <thead class="thead-light">
                    <tr>
                      <th scope="col" th:text="#{no}">No</th>
                      <th scope="col" th:text="#{nameFile}">File name</th>
                      <th scope="col" th:text="#{preview}">Preview</th>
                      <th scope="col" th:text="#{download}">Download</th>
                    </tr>
                    </thead>
                    <tbody id="file-table-body">
                    <tr class="file-old" th:each="item:${fileDocmentDto.fileDtos}"
                        th:id="'trfile' + ${item.id}">
                      <th scope="row" class="stt3"
                          style="font-weight: normal; color: #000000;">1
                      </th>
                      <td th:text="${item.name}?${item.name}:'fileUpload'">Otto</td>
                      <td>
                        <a type="button" th:if="${item.check==1 or item.check==2}" data-toggle="modal"
                           th:attr="data-target='#viewModal'+${item.id}"
                           style="color: #001AFF;" th:text="#{view}">View</a>
                      </td>
                      <td>
                        <a type="button" target="_blank"
                           th:href="@{'/document/download/'+${item.id}}"
                           class="btn btn-primary" th:text="#{download}">Download</a>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" th:each="item:${fileDocmentDto.fileDtos}" th:if="${item.check!=0}" th:id="'viewModal' + ${item.id}" tabindex="-1"
       aria-labelledby="detailModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header pt-3 px-3 pb-0">
          <div class="router_title my-0">
            <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-sm mr-2 p-1" style="line-height:11px;margin-bottom: 8px;background-color: #00709E;color: white;"><span aria-hidden="true" style="font-size: 18px;">&times;</span></button>
            <h3 style="font-weight: bold; color: #00709E;" id="detailModalLabel">View</h3>
          </div>
        </div>
        <div class="modal-body">
          <iframe th:if="${item.check==1}" class="ringme-file-preview"
                  th:src="${'https://view.officeapps.live.com/op/embed.aspx?src=http://docs-timor.ringme.vn/document-media01'+item.url}"
                  style="    width: 100%;
    min-height: 80vh;"></iframe>
          <iframe th:if="${item.check==2}" class="ringme-file-preview"
                  th:src="${'http://docs-timor.ringme.vn/document-media01'+item.url}"
                  style="    width: 100%;
    min-height: 80vh;"></iframe>
          <!--                <embed th:src="${'https://devsdkapis.ringme.vn/qltl/fileupload/'+item.url}" width="100%" height="500px">-->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap core JavaScript-->
<!--<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>-->
<!-- Bootstrap core JavaScript-->

<script th:src="@{/webjars/jquery/3.6.0/jquery.min.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>


<!-- Custom scripts for all pages-->
<script th:src="@{/js/sb-admin-2.min.js}"></script>


<!-- Custom scripts for all pages-->
<script>
        function openModalReset(){
            $('#resetpassword').modal('show');
        }
        function disableResetPassword() {
          document.getElementById("resetpasswordform").submit();
          document.getElementById("resetpasswordform").querySelector("button[type='submit']").disabled = true;
        }

<!--   function changeLanguage(lang) {-->
<!--      var url = new URL(window.location.href);-->
<!--      url.searchParams.set("lang", lang);-->
<!--      window.location.href = url.toString();-->
<!--    }-->

<!--        var showModal2 = false;-->
<!--        showModal2 = [[${open}]];-->
<!--        if (showModal2) {-->
<!--            openModalReset();-->
<!--        }-->
</script>

</body>

</html>